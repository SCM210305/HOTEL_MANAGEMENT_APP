create database HOTEL_DB;
use HOTEL_DB;
create table CUSTOMER(
CUSTOMER_ID VARCHAR(20) PRIMARY KEY,
F_NAME VARCHAR(20) NOT NULL,
M_INIT CHAR(20),
L_NAME VARCHAR(20)NOT NULL,
PROOF VARCHAR(20) UNIQUE NOT NULL,
GENDER CHAR(1),
EMAIL VARCHAR(20) UNIQUE);

CREATE TABLE HOTEL (
    HOTEL_ID VARCHAR(20) PRIMARY KEY,
    HOTEL_NAME VARCHAR(20) NOT NULL,
    STATE VARCHAR(20) NOT NULL,
    DISTRICT VARCHAR(20) NOT NULL,
    CITY VARCHAR(20)NOT NULL,
    STREET VARCHAR(20)
);

CREATE TABLE ROOMS (
    ROOM_NO VARCHAR(20) PRIMARY KEY,
    ROOM_TYPE VARCHAR(20),
    STATUS VARCHAR(20) NOT NULL,
    PRICE DECIMAL(10, 2),
    HOTEL_ID VARCHAR(255),
    FOREIGN KEY (HOTEL_ID) REFERENCES HOTEL(HOTEL_ID) ON DELETE SET NULL 
);

CREATE TABLE RESERVATION (
    RESER_ID VARCHAR(20) PRIMARY KEY,
    GUEST_COUNT INT,
    CHK_IN DATE,
    CHK_OUT DATE,
    ROOM_PREF_TYPE VARCHAR(255),
    CUSTOMER_ID VARCHAR(255),
    PROOF VARCHAR(255),
    EMAIL VARCHAR(255),
    FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID) ON DELETE CASCADE
);

CREATE TABLE CONFIRMATION (
    CONF_ID VARCHAR(20) PRIMARY KEY,
    CONF_MODE VARCHAR(20),
    CONF_DATE DATE,
    STATUS VARCHAR(20),
    RESER_ID VARCHAR(20),
    FOREIGN KEY (RESER_ID) REFERENCES RESERVATION(RESER_ID)
);

CREATE TABLE IF NOT EXISTS PAYMENT (
    PAYMENT_ID VARCHAR(255) PRIMARY KEY,
    PAY_REF VARCHAR(255),
    AMOUNT DECIMAL(10, 2),
    PAY_METHOD VARCHAR(255),
    PAY_STATUS VARCHAR(255),
    RESER_ID VARCHAR(255),
    FOREIGN KEY (RESER_ID) REFERENCES RESERVATION(RESER_ID) ON DELETE CASCADE
);

CREATE TABLE BOOKED_VIA (
    ROOM_NO VARCHAR(255),
    RESER_ID VARCHAR(255),
    MODE VARCHAR(255),
    PRIMARY KEY (ROOM_NO, RESER_ID),
    FOREIGN KEY (ROOM_NO) REFERENCES ROOMS(ROOM_NO) ON DELETE CASCADE,
    FOREIGN KEY (RESER_ID) REFERENCES RESERVATION(RESER_ID) ON DELETE CASCADE
);


INSERT INTO HOTEL (HOTEL_ID, HOTEL_NAME, STATE, DISTRICT, CITY, STREET) VALUES
('H101', 'Grand Hyatt', 'New York', 'New York', 'New York City', '109 E 42nd St'),
('H102', 'The Ritz-Carlton', 'California', 'Los Angeles', 'Los Angeles', '900 W Olympic Blvd'),
('H103', 'Hilton Garden Inn', 'Texas', 'Harris', 'Houston', '800 Chartres St'),
('H104', 'Four Seasons Hotel', 'Illinois', 'Cook', 'Chicago', '120 E Delaware Pl'),
('H105', 'Bellagio Hotel ', 'Nevada', 'Clark', 'Las Vegas', '3600 S Las-vegas');
INSERT INTO ROOMS (ROOM_NO, ROOM_TYPE, STATUS, PRICE, HOTEL_ID) VALUES
-- Grand Hyatt (H101)
('101', 'Standard', 'Available', 150.00, 'H101'),
('102', 'Standard', 'Booked', 150.00, 'H101'),
('103', 'Deluxe', 'Available', 250.00, 'H101'),
('104', 'Suite', 'Available', 450.00, 'H101'),
-- The Ritz-Carlton (H102)
('201', 'Standard', 'Available', 180.00, 'H102'),
('202', 'Deluxe', 'Booked', 280.00, 'H102'),
('203', 'Deluxe', 'Available', 280.00, 'H102'),
('204', 'Suite', 'Maintenance', 500.00, 'H102'),
-- Hilton Garden Inn (H103)
('301', 'Standard', 'Available', 120.00, 'H103'),
('302', 'Standard', 'Booked', 120.00, 'H103'),
('303', 'Deluxe', 'Available', 200.00, 'H103'),
('304', 'Suite', 'Available', 350.00, 'H103'),
-- Four Seasons Hotel (H104)
('401', 'Standard', 'Available', 200.00, 'H104'),
('402', 'Deluxe', 'Booked', 300.00, 'H104'),
('403', 'Suite', 'Available', 600.00, 'H104'),
('404', 'Suite', 'Booked', 600.00, 'H104'),
-- Bellagio Hotel & Casino (H105)
('501', 'Standard', 'Available', 190.00, 'H105'),
('502', 'Deluxe', 'Maintenance', 320.00, 'H105'),
('503', 'Suite', 'Available', 550.00, 'H105'),
('504', 'Suite', 'Booked', 550.00, 'H105');